<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>√âditeur de Code Sandpack Officiel</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script crossorigin src="https://unpkg.com/@codesandbox/sandpack-react@2.20.0/dist/umd/index.js"></script>
    <script crossorigin src="https://unpkg.com/@codesandbox/sandpack-themes@2.0.21/dist/umd/index.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            min-height: 100vh;
            color: white;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 3em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .editor-container {
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
            padding: 20px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
        }

        .features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .feature {
            background: rgba(255,255,255,0.1);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }

        .feature h3 {
            margin-bottom: 10px;
            color: #4ade80;
        }

        .editor-wrapper {
            margin-top: 30px;
        }

        .theme-selector {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .theme-btn {
            background: rgba(255,255,255,0.2);
            border: 2px solid white;
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .theme-btn:hover {
            background: rgba(255,255,255,0.3);
            transform: translateY(-2px);
        }

        .theme-btn.active {
            background: #4ade80;
            border-color: #4ade80;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üèóÔ∏è √âditeur de Code Sandpack Officiel</h1>
            <p>√âditeur complet avec toutes les fonctionnalit√©s : code, preview, console, tests, explorateur de fichiers</p>
        </div>

        <div class="features">
            <div class="feature">
                <h3>‚úèÔ∏è √âditeur de Code</h3>
                <p>Coloration syntaxique avanc√©e avec TypeScript support</p>
            </div>
            <div class="feature">
                <h3>üëÅÔ∏è Preview Temps R√©el</h3>
                <p>Voyez vos changements instantan√©ment</p>
            </div>
            <div class="feature">
                <h3>üñ•Ô∏è Console Interactive</h3>
                <p>Debuggez avec la console JavaScript</p>
            </div>
            <div class="feature">
                <h3>üß™ Tests Unitaires</h3>
                <p>Tests Jest int√©gr√©s</p>
            </div>
            <div class="feature">
                <h3>üìÅ Explorateur</h3>
                <p>Navigation dans les fichiers</p>
            </div>
            <div class="feature">
                <h3>üé® Th√®mes</h3>
                <p>Multiples th√®mes disponibles</p>
            </div>
        </div>

        <div class="editor-container">
            <div class="theme-selector">
                <button class="theme-btn active" onclick="changeTheme('nightOwl')">Night Owl</button>
                <button class="theme-btn" onclick="changeTheme('githubLight')">GitHub Light</button>
                <button class="theme-btn" onclick="changeTheme('sandpackDark')">Sandpack Dark</button>
            </div>

            <div id="sandpack-container"></div>
        </div>
    </div>

    <script type="text/babel">
        const { Sandpack } = window.SandpackReact;
        const { nightOwl, githubLight, sandpackDark } = window.SandpackThemes;

        const files = {
            "/App.js": {
                code: `import React, { useState } from "react";
import "./styles.css";

export default function App() {
  const [count, setCount] = useState(0);

  return (
    <div className="App">
      <h1>Hello Sandpack Editor! üöÄ</h1>
      <p>Compteur: {count}</p>
      <button onClick={() => setCount(count + 1)}>
        Incr√©menter
      </button>
      <button onClick={() => setCount(count - 1)}>
        D√©cr√©menter
      </button>
      <p>Ouvrez la console pour voir les logs...</p>
      {console.log("Hello from Sandpack!")}
    </div>
  );
}`,
            },
            "/styles.css": {
                code: `body {
  font-family: 'Arial', sans-serif;
  margin: 0;
  padding: 20px;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  min-height: 100vh;
  color: white;
}

.App {
  max-width: 800px;
  margin: 0 auto;
  text-align: center;
}

h1 {
  font-size: 2.5em;
  margin-bottom: 20px;
  text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
}

button {
  background: rgba(255,255,255,0.2);
  border: 2px solid white;
  color: white;
  padding: 10px 20px;
  margin: 10px;
  border-radius: 25px;
  cursor: pointer;
  font-size: 16px;
  transition: all 0.3s ease;
}

button:hover {
  background: rgba(255,255,255,0.3);
  transform: translateY(-2px);
}

p {
  font-size: 18px;
  margin: 15px 0;
}`,
            },
            "/App.test.js": {
                code: `import { render, screen } from '@testing-library/react';
import userEvent from '@testing-library/user-event';
import App from './App';

test('renders learn react link', () => {
  render(<App />);
  const linkElement = screen.getByText(/Hello Sandpack Editor/i);
  expect(linkElement).toBeInTheDocument();
});

test('counter starts at 0', () => {
  render(<App />);
  const counterElement = screen.getByText(/Compteur: 0/i);
  expect(counterElement).toBeInTheDocument();
});

test('increment button works', async () => {
  render(<App />);
  const button = screen.getByText(/Incr√©menter/i);
  await userEvent.click(button);
  const counterElement = screen.getByText(/Compteur: 1/i);
  expect(counterElement).toBeInTheDocument();
});`,
            },
        };

        let currentTheme = nightOwl;

        function changeTheme(themeName) {
            const themes = { nightOwl, githubLight, sandpackDark };
            currentTheme = themes[themeName];

            // Update active button
            document.querySelectorAll('.theme-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');

            // Re-render Sandpack with new theme
            renderSandpack();
        }

        function renderSandpack() {
            ReactDOM.render(
                React.createElement(Sandpack, {
                    template: "react",
                    theme: currentTheme,
                    files: files,
                    options: {
                        showConsole: true,
                        showConsoleButton: true,
                        showTabs: true,
                        closableTabs: true,
                        showLineNumbers: true,
                        showInlineErrors: true,
                        wrapContent: true,
                        editorHeight: 400,
                    }
                }),
                document.getElementById('sandpack-container')
            );
        }

        // Initial render
        renderSandpack();
    </script>
</body>
</html>
